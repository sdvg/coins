<app-header></app-header>

<div class="page-expense container">
  <form
    name="form"
    ng-submit="form.$valid && $ctrl.submit($ctrl.expense)"
    novalidate
  >
    <fieldset
      class="form-group"
      ng-class="{'has-danger': form.$submitted && form.amount.$invalid}"
    >
      <label
        class="control-label"
        for="expense-amount"
      >
        Amount
      </label>
      <input
        class="form-control"
        id="expense-amount"
        type="tel"
        ng-model="$ctrl.expense.amount"
        name="amount"
        placeholder="How much did you spend?"
        amount-input
        required
      >

      <div
        class="text-help"
        ng-show="form.$submitted && form.amount.$invalid"
      >
        Please enter the amount
      </div>
    </fieldset>

    <fieldset
      class="form-group"
      ng-class="{'has-danger': form.$submitted && form.tag.$invalid}"
    >
      <label
        class="control-label"
        for="expense-tags"
      >
        Tag
      </label>
      <select
        class="form-control c-select"
        id="expense-tags"
        ng-model="$ctrl.expense.tag"
        name="tag"
        required
      >
        <option
          value=""
          selected
        >
          Select a tag...
        </option>
        <option
          ng-repeat="tag in $ctrl.availableTags"
          value="{{ tag.id }}"
        >
          {{ tag.name }}
        </option>
      </select>

      <div
        class="text-help"
        ng-show="form.$submitted && form.tag.$invalid"
      >
        Please select a tag
      </div>
    </fieldset>

    <fieldset class="form-group">
      <label
        class="control-label"
        for="expense-comment"
      >
        Comment
      </label>
      <textarea
        class="form-control"
        id="expense-comment"
        ng-model="$ctrl.expense.comment"
        name="comment"
        placeholder="Add a comment if you like"
      ></textarea>
    </fieldset>

    <fieldset class="form-group">
      <label
        class="control-label"
        for="expense-date"
      >
        Date
      </label>
      <input
        class="form-control date-input"
        id="expense-date"
        ng-model="$ctrl.expense.date"
        name="date"
        type="date"
      >
    </fieldset>

    <button
      class="btn btn-primary btn-lg btn-block"
      type="submit"
    >
      Save
    </button>

    <div
      class="button-remove-wrap"
      ng-show="!$ctrl.isNew"
    >
      <button
        type="button"
        class="btn btn-danger-outline btn-sm"
        ng-click="$ctrl.remove($ctrl.expense)"
      >
        Remove expense
      </button>
    </div>
  </form>
</div>
